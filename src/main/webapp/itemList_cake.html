<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootswatch@4.5.2/dist/sandstone/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="css/center.css">
<meta charset="UTF-8">
<title>케이크</title>
<style>
    body {
        background-color: #f9f9f9;
        margin: 0;
        padding: 0;
    }

    #wrap {
        position: relative;
        min-width: 1440px;
        width: 100%;
        overflow: hidden;
        background-color: #fff;
    }

    #contentWrapper {
        width: 1200px;
        padding: 40px 0;
        position: relative;
        margin-right: auto;
        margin-left: auto;
        border-top: 1px solid #e7e8e9;
        min-height: calc(100vh - 579px);
    }

    #contentWrapper h1 {
        color: white;
        -webkit-text-stroke: 1px #F8F5F0;
        font-weight: bold;
    }

    #content {
        margin: 40px auto;
        position: relative;
        width: 1200px;
    }

    .page_location {
        text-align: left;
        padding-top: 19px;
        margin-bottom: 10px;
        font-size: 0;
    }

    h1 {
        text-align: center;
        font-size: 2em;
        margin-bottom: 40px;
        color: #333;
    }

    #top_category {
        margin-bottom: 40px;
        display: flex;
        justify-content: center;
    }

    #top_category ul {
        list-style: none;
        padding: 0;
        margin: 0;
        background-color: #fff;
        width : 50%;
    }

	#top_category ul {
	    display: flex;
	    justify-content: space-between;
	    list-style: none;
	    padding: 0;
	    margin: 0 auto; /* 중앙 정렬 */
	    width: 60%; /* ul의 너비를 전체의 60%로 설정 */
	    background-color: #fff;
	}
	
	#top_category li {
	    background-color: #c85855;
	    color: #fff;
	    padding: 10px;
	    text-align: center;
	    cursor: pointer;
	    flex-grow: 1; /* 남은 공간을 균등하게 분할 */
	    margin: 0 10px; /* 항목 사이에 여백 추가 */
	    border-radius: 5px; /* 약간의 모서리 둥글림 */
	    max-width: calc(100% / 3 - 20px); /* 각 항목의 최대 너비를 설정 */
	    font-size: 20px;
	}
	
	#top_category li a {
	    color: #fff;
	    text-decoration: none;
	}
	
	#top_category li:hover {
	    background-color: #a94444;
	}


    .item_info {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin: 50px 0;
        padding: 20px;
        background-color: #F8F5F0;
        border-top: 2px solid #ddd;
    }

    .item_total {
        font-size: 1.2em;
        color: #555;
    }

    .group_sort ul {
        list-style: none;
        padding: 0;
        margin: 0;
        display: flex;
    }

    .group_sort li {
        margin: 0 10px;
    }

    .group_sort a {
        text-decoration: none;
        color: #555;
    }

    .group_sort a:hover {
        color: #000;
    }

    .item_wrap {
        display: flex;
        flex-wrap: wrap;
        gap: 30px;
        justify-content: space-between;
    }

    .item_elem {
        background-color: #fff;
        border: 1px solid #e7e8e9;
        border-radius: 5px;
        padding: 20px;
        width: calc(25% - 30px); /* 4개씩 배치되도록 설정 */
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        display: flex;
        flex-direction: column;
        align-items: center;
        position: relative;
    }

	.thumb {
	    position: relative;
	    width: 100%;
	    text-align: center;
	}
	
	.thumb img {
	    max-width: 100%;
	    border-radius: 5px;
	}
	
	.thumb .cart-overlay {
	    position: absolute;
	    top: 50%;
	    left: 50%;
	    transform: translate(-50%, -50%);
	    background: rgba(0, 0, 0, 0.7);
	    padding: 15px;
	    border-radius: 50%;
	    display: none; /* 기본적으로 숨김 */
	    width: 60px;
	    height: 60px;
	    justify-content: center;
	    align-items: center;
	    cursor: pointer;
	    z-index: 20; /* 글자 위에 표시되도록 */
	}
	
	.thumb .cart-overlay img {
        width: 30px;
        height: 30px;
        filter: invert(1); /* 아이콘 색상을 흰색으로 변경 */
    }
	
	.thumb:hover .cart-overlay {
	    display: flex; /* 마우스를 올렸을 때만 표시 */
	}
	
	.badge {
	    font-size: 0.75em;
	    padding: 5px 10px;
	    border-radius: 3px;
	    background-color: #f39c12;
	    color: #fff;
	    position: absolute;
	    top: 10px;
	    right: 10px;
	    z-index: 10; /* 이미지 위에 표시되도록 */
	}


    .prd_title a {
        text-decoration: none;
        color: #333;
        font-size: 1.1em;
        margin-top: 10px;
        display: block;
        text-align: center;
    }

    .prd_title a:hover {
        color: #000;
    }

    .prd_price {
        font-size: 1.2em;
        margin: 10px 0;
        text-align: center;
    }

    .prd_review {
        color: #555;
        font-size: 0.9em;
        text-align: center;
    }

    dd {
        padding: 0;
    }
    
    dd ul {
        padding: 0;
        list-style-type: none;
    }

    .pagination {
        margin-top: 80px;
        margin-bottom: 40px;
        display: flex;
        justify-content: center;
    }
</style>
</head>
<body>
<div id="wrap">
    <!-- 헤더 자리 -->
    
    <!-- 상품 목록 페이지 시작 -->
    <div id="contentWrapper">
    
    <!-- Breadcrumbs 영역 시작-->
	<nav class="breadcrumb-container">
		<ol class="breadcrumb">
			<li class="breadcrumb-item"><a href="#"><i class="fas fa-home"></i></a></li>
			<li class="breadcrumb-item"><a href="#">케이크</a></li>
		</ol>
	</nav>
	
        <!-- 상품 목록 내용 -->
        <div id="contentWrap">
            <!-- 지역 선택 분류 상단 메뉴 -->
            <div id="top_category">
                <ul>
                    <li class="btn btn-danger"><a href="itemList_bread.html">빵</a></li>
                    <li class="btn btn-danger"><a href="itemList_cake.html">케이크</a></li>
                    <li class="btn btn-danger"><a href="itemList_desert.html">디저트</a></li>
                </ul>
            </div>
            <!-- 상품 목록 하단 시작 -->
            <!-- 상품 목록 안내단 -->
            <div class="item_info">
                <div class="item_total">
                    총 
                    <b id="totalItemCount"></b>
                    개의 상품이 있습니다
                </div>
            </div>
            <!-- 상품 목록 표시단 -->
            <div class="item_wrap" id="itemWrap">
                <!-- 상품이 동적으로 추가되는 부분 -->
            </div>
        </div>
        
        <!-- 페이지네이션 -->
        <div>
          <ul class="pagination" id="pagination">
          </ul>
        </div>
    </div>
    
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.3/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>    
    <script>
	    const items = [
	        { title: "갸또 쇼꼴라", price: "38,000원", img: "./img/cake/갸또 쇼꼴라.jpg", badge: "BEST" },
	        { title: "고구마 생크림 케익", price: "33,000원", img: "./img/cake/고구마 생크림 케익.jpg", badge: "NEW" },
	        { title: "까망베르 치즈케익", price: "29,000원", img: "./img/cake/까망베르 치즈케익.jpg", badge: "추천" },
	        { title: "바닐라 생크림 케익", price: "33,000원", img: "./img/cake/바닐라 생크림 케익.jpg" },
	        { title: "샤를로뜨", price: "42,000원", img: "./img/cake/샤를로뜨.jpg", badge: "BEST" },
	        { title: "쉭쎄", price: "29,000원", img: "./img/cake/쉭쎄.jpg", badge: "NEW" },
	        { title: "스위스롤 & 말차롤케익", price: "20,000원", img: "./img/cake/스위스롤 & 말차롤케익.jpg", badge: "추천" },
	        { title: "티라미수", price: "29,000원", img: "./img/cake/티라미수.jpg" },
	        { title: "파인치즈 케익", price: "39,000원", img: "./img/cake/파인치즈 케익.jpg", badge: "BEST" },
	        { title: "프레지에 에큠", price: "37,000원", img: "./img/cake/프레지에 에큠.jpg", badge: "NEW" },
	        { title: "프레지에", price: "39,000원", img: "./img/cake/프레지에.jpg", badge: "추천" },
	        { title: "후랑보아즈", price: "37,000원", img: "./img/cake/후랑보아즈.jpg" },
	
	    ];

        const itemsPerPage = 12; // 페이지당 최대 12개 표시
        let currentPage = 1;

        function displayItems(page) {
            const startIndex = (page - 1) * itemsPerPage;
            const endIndex = startIndex + itemsPerPage;
            const itemsToDisplay = items.slice(startIndex, endIndex);
            
            const itemWrap = document.getElementById('itemWrap');
            itemWrap.innerHTML = '';

            itemsToDisplay.forEach(item => {
                const itemElem = document.createElement('dl');
                itemElem.classList.add('item_elem');
                
                // 배지가 undefined인 경우 배지 요소를 표시하지 않음
                const badgeHTML = item.badge ? `<div class="badge">${item.badge}</div>` : '';
                const imgSrc = item.img || ''; // 이미지가 없는 경우 빈 문자열 할당

                itemElem.innerHTML = `
                    ${badgeHTML}
                    <dt class="thumb">
                        <img class="prd_img" src="${imgSrc}" alt="${item.title}">
                        <div class="cart-overlay" onclick="addToCart('${item.title}', '${item.price}', '${imgSrc}')">
                            <img src="https://cdn-icons-png.flaticon.com/512/1170/1170678.png" alt="장바구니로 이동">
                        </div>
                    </dt>
                    <dd>
                        <ul>
                            <li class="prd_title">
                                <a href="#" onclick="viewItemDetail('${item.title}', '${item.price}', '${imgSrc}', '${item.badge}')">${item.title}</a>
                            </li>
                            <li class="prd_price">
                                ${item.price}
                            </li>
                            <li class="prd_review">
                                <em>상품후기</em>
                                "상품후기갯수"
                            </li>
                        </ul>
                    </dd>
                `;
                itemWrap.appendChild(itemElem);
            });
        }
        
        function setupPagination(totalItems) {
            const pagination = document.getElementById('pagination');
            const totalPages = Math.ceil(totalItems / itemsPerPage);

            pagination.innerHTML = '';

            for (let i = 1; i <= totalPages; i++) {
                const li = document.createElement('li');
                li.classList.add('page-item');
                if (i === currentPage) li.classList.add('active');
                
                const a = document.createElement('a');
                a.classList.add('page-link');
                a.href = '#';
                a.textContent = i;
                a.addEventListener('click', function(e) {
                    e.preventDefault();
                    currentPage = i;
                    displayItems(currentPage);
                    setupPagination(totalItems);
                });
                
                li.appendChild(a);
                pagination.appendChild(li);
            }
        }

     // 장바구니에 상품 추가
        function addToCart(title, price, img) {
            let cartItems = JSON.parse(localStorage.getItem('cartItems')) || [];

            const existingItemIndex = cartItems.findIndex(item => item.title === title);

            if (existingItemIndex >= 0) {
                cartItems[existingItemIndex].quantity += 1;
            } else {
                cartItems.push({
                    title,
                    price,
                    img: img || 'default-image-path.jpg', // img가 undefined인 경우 기본 이미지 사용
                    quantity: 1
                });
            }

            localStorage.setItem('cartItems', JSON.stringify(cartItems));

            alert('장바구니에 추가되었습니다!');
            
            if (confirm('장바구니로 이동하시겠습니까?')) {
                window.location.href = 'orderCart.html';  // 장바구니 페이지로 이동
            }
        }

        // 상품 상세보기
        function viewItemDetail(title, price, img, badge) {
            const itemDetail = { title, price, img: img || 'default-image-path.jpg', badge };
            localStorage.setItem('selectedItem', JSON.stringify(itemDetail));
            window.location.href = 'itemDetail.html';
        }

        // 초기화
        document.getElementById('totalItemCount').textContent = items.length;
        displayItems(currentPage);
        setupPagination(items.length);


    </script>
</div>
</body>
</html>
