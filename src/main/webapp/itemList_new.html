<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootswatch@4.5.2/dist/sandstone/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="css/center.css">
</head>
<style>
    body {
        background-color: #f9f9f9;
        margin: 0;
        padding: 0;
    }

    #wrap {
        position: relative;
        min-width: 1440px;
        width: 100%;
        overflow: hidden;
        background-color: #fff;
    }

    #contentWrapper {
        width: 1200px;
        padding: 40px 0;
        position: relative;
        margin-right: auto;
        margin-left: auto;
        border-top: 1px solid #e7e8e9;
        min-height: calc(100vh - 579px);
    }

    #contentWrapper h1 {
        color: white;
        -webkit-text-stroke: 1px #F8F5F0;
        font-weight: bold;
    }

    #content {
        margin: 40px auto;
        position: relative;
        width: 1200px;
    }

    .page_location {
        text-align: left;
        padding-top: 19px;
        margin-bottom: 10px;
        font-size: 0;
    }

    h1 {
        text-align: center;
        font-size: 2em;
        margin-bottom: 40px;
        color: #333;
    }

    #top_category {
        margin-bottom: 40px;
        display: flex;
        justify-content: center;
    }

    #top_category ul {
        list-style: none;
        padding: 0;
        margin: 0;
        background-color: #fff;
        witdh : 50%;
    }

	#top_category ul {
	    display: flex;
	    justify-content: space-between;
	    list-style: none;
	    padding: 0;
	    margin: 0 auto; /* 중앙 정렬 */
	    width: 60%; /* ul의 너비를 전체의 60%로 설정 */
	    background-color: #fff;
	}
	
	#top_category li {
	    background-color: #c85855;
	    color: #fff;
	    padding: 10px;
	    text-align: center;
	    cursor: pointer;
	    flex-grow: 1; /* 남은 공간을 균등하게 분할 */
	    margin: 0 10px; /* 항목 사이에 여백 추가 */
	    border-radius: 5px; /* 약간의 모서리 둥글림 */
	    max-width: calc(100% / 3 - 20px); /* 각 항목의 최대 너비를 설정 */
	    font-size: 20px;
	}
	
	#top_category li a {
	    color: #fff;
	    text-decoration: none;
	}
	
	#top_category li:hover {
	    background-color: #a94444;
	}


    .item_info {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin: 50px 0;
        padding: 20px;
        background-color: #F8F5F0;
        border-top: 2px solid #ddd;
    }

    .item_total {
        font-size: 1.2em;
        color: #555;
    }

    .group_sort ul {
        list-style: none;
        padding: 0;
        margin: 0;
        display: flex;
    }

    .group_sort li {
        margin: 0 10px;
    }

    .group_sort a {
        text-decoration: none;
        color: #555;
    }

    .group_sort a:hover {
        color: #000;
    }

    .item_wrap {
        display: flex;
        flex-wrap: wrap;
        gap: 30px;
        justify-content: space-between;
    }

    .item_elem {
        background-color: #fff;
        border: 1px solid #e7e8e9;
        border-radius: 5px;
        padding: 20px;
        width: calc(25% - 30px); /* 4개씩 배치되도록 설정 */
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        display: flex;
        flex-direction: column;
        align-items: center;
        position: relative;
    }

	.thumb {
	    position: relative;
	    width: 100%;
	    text-align: center;
	}
	
	.thumb img {
	    max-width: 100%;
	    border-radius: 5px;
	}
	
	.thumb .cart-overlay {
	    position: absolute;
	    top: 50%;
	    left: 50%;
	    transform: translate(-50%, -50%);
	    background: rgba(0, 0, 0, 0.7);
	    padding: 15px;
	    border-radius: 50%;
	    display: none; /* 기본적으로 숨김 */
	    width: 60px;
	    height: 60px;
	    justify-content: center;
	    align-items: center;
	    cursor: pointer;
	    z-index: 20; /* 글자 위에 표시되도록 */
	}
	
	.thumb .cart-overlay img {
        width: 30px;
        height: 30px;
        filter: invert(1); /* 아이콘 색상을 흰색으로 변경 */
    }
	
	.thumb:hover .cart-overlay {
	    display: flex; /* 마우스를 올렸을 때만 표시 */
	}
	
	.badge {
	    font-size: 0.75em;
	    padding: 5px 10px;
	    border-radius: 3px;
	    background-color: #f39c12;
	    color: #fff;
	    position: absolute;
	    top: 10px;
	    right: 10px;
	    z-index: 10; /* 이미지 위에 표시되도록 */
	}


    .prd_title a {
        text-decoration: none;
        color: #333;
        font-size: 1.1em;
        margin-top: 10px;
        display: block;
        text-align: center;
    }

    .prd_title a:hover {
        color: #000;
    }

    .prd_price {
        font-size: 1.2em;
        margin: 10px 0;
        text-align: center;
    }

    .prd_review {
        color: #555;
        font-size: 0.9em;
        text-align: center;
    }

    dd {
        padding: 0;
    }
    
    dd ul {
        padding: 0;
        list-style-type: none;
    }

    .pagination {
        margin-top: 80px;
        margin-bottom: 40px;
        display: flex;
        justify-content: center;
    }
</style>
<body>
<div id="wrap">
    <!-- 헤더 자리 -->
   
    
    <!-- 상품 목록 페이지 시작 -->
    <div id="contentWrapper">
    
    <!-- Breadcrumbs 영역 시작-->
	<nav class="breadcrumb-container">
		<ol class="breadcrumb">
			<li class="breadcrumb-item"><a href="#"><i class="fas fa-home"></i></a></li>
			<li class="breadcrumb-item"><a href="#">NEW</a></li>
		</ol>
	</nav>
   
        <!-- 상품 목록 내용 -->
        <div id="contentWrap">

            <!-- 상품 목록 하단 시작 -->
            <!-- 상품 목록 안내단 -->
            <div class="item_info">
                <div class="item_total">
                    총 
                    <b id="totalItemCount"></b>
                    개의 상품이 있습니다.
                </div>
                
            </div>
            <!-- 상품 목록 표시단 -->
            <div class="item_wrap" id="itemWrap">
                <!-- 상품이 동적으로 추가되는 부분 -->
            </div>
        </div>
        
        <!-- 페이지네이션 -->
        <div>
          <ul class="pagination" id="pagination">
          </ul>
        </div>
    </div>
    
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.3/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>    
    <script>
	    const items = [
	        { title: "걀렛뜨 데로와 푀유떼", price: "9,800원", img: "./img/bread/걀렛뜨 데로와 푀유떼.jpg", badge: "BEST" },
	        { title: "그리오틴 케익(6EA)", price: "14,800원", img: "./img/bread/그리오틴 케익(6EA).jpg", badge: "NEW" },
	        { title: "되리브르(대)", price: "15,000원", img: "./img/bread/되리브르(대).jpg", badge: "추천" },
	        { title: "땅드레스 아로랑쥬(6EA)", price: "14,800원", img: "./img/bread/땅드레스 아로랑쥬(6EA).jpg"},
	        { title: "로데브", price: "4,500원", img: "./img/bread/로데브.jpg", badge: "BEST" },
	        { title: "르뱅 꾸뻬", price: "3,800원", img: "./img/bread/르뱅 꾸뻬.jpg", badge: "NEW" },
	        { title: "마블케익", price: "20,000원", img: "./img/bread/마블케익.jpg", badge: "추천" },
	        { title: "바따르", price: "4,200원", img: "./img/bread/바따르.jpg" },
	        { title: "빠리지앵", price: "5,900원", img: "./img/bread/빠리지앵.jpg", badge: "BEST" },
	        { title: "뺑드미", price: "4,900원", img: "./img/bread/뺑드미.jpg", badge: "NEW" },
	        { title: "세글 누아레쟁", price: "4,000원", img: "./img/bread/세글 누아레쟁.jpg", badge: "추천" },
	        { title: "오렌지 케익", price: "22,000원", img: "./img/bread/오렌지케익.jpg"},
	        { title: "유산균 발효 식빵", price: "4,000원", img: "./img/bread/유산균 발효 식빵.jpg", badge: "BEST" },
	        { title: "이탈리안 레몬케익", price: "21,000원", img: "./img/bread/이탈리안 레몬케익.jpg", badge: "NEW" },
	        { title: "잉글리쉬 파운드", price: "19,000원", img: "./img/bread/잉글리쉬 파운드.jpg", badge: "추천" },
	        { title: "자연효모빵", price: "4,600원", img: "./img/bread/자연효모빵.jpg" },
	        { title: "갸또 쇼꼴라", price: "38,000원", img: "./img/cake/갸또 쇼꼴라.jpg", badge: "BEST" },
	        { title: "고구마 생크림 케익", price: "33,000원", img: "./img/cake/고구마 생크림 케익.jpg", badge: "NEW" },
	        { title: "까망베르 치즈케익", price: "29,000원", img: "./img/cake/까망베르 치즈케익.jpg", badge: "추천" },
	        { title: "바닐라 생크림 케익", price: "33,000원", img: "./img/cake/바닐라 생크림 케익.jpg" },
	        { title: "샤를로뜨", price: "42,000원", img: "./img/cake/샤를로뜨.jpg", badge: "BEST" },
	        { title: "쉭쎄", price: "29,000원", img: "./img/cake/쉭쎄.jpg", badge: "NEW" },
	        { title: "스위스롤 & 말차롤케익", price: "20,000원", img: "./img/cake/스위스롤 & 말차롤케익.jpg", badge: "추천" },
	        { title: "티라미수", price: "29,000원", img: "./img/cake/티라미수.jpg" },
	        { title: "파인치즈 케익", price: "39,000원", img: "./img/cake/파인치즈 케익.jpg", badge: "BEST" },
	        { title: "프레지에 에큠", price: "37,000원", img: "./img/cake/프레지에 에큠.jpg", badge: "NEW" },
	        { title: "프레지에", price: "39,000원", img: "./img/cake/프레지에.jpg", badge: "추천" },
	        { title: "후랑보아즈", price: "37,000원", img: "./img/cake/후랑보아즈.jpg" },
	        { title: "그리스넛(6EA)", price: "38,000원", img: "./img/desert/그리스넛(6EA).jpg", badge: "BEST" },
	        { title: "꼬끼유(12EA)", price: "33,000원", img: "./img/desert/꼬끼유(12EA).jpg", badge: "NEW" },
	        { title: "노아(6EA)", price: "29,000원", img: "./img/desert/노아(6EA).jpg", badge: "추천" },
	        { title: "뚜쇼꼬(8EA)", price: "33,000원", img: "./img/desert/뚜쇼꼬(8EA).jpg" },
	        { title: "라무르(6EA)", price: "42,000원", img: "./img/desert/라무르(6EA).jpg", badge: "BEST" },
	        { title: "라피누", price: "29,000원", img: "./img/desert/라피누.jpg", badge: "NEW" },
	        { title: "랑그 드 샤", price: "20,000원", img: "./img/desert/랑그 드 샤.jpg", badge: "추천" },
	        { title: "루이즈의 모자(5EA)", price: "29,000원", img: "./img/desert/루이즈의 모자(5EA).jpg" },
	        { title: "미니망디앙(8EA)", price: "39,000원", img: "./img/desert/미니망디앙(8EA).jpg", badge: "BEST" },
	        { title: "복수초·요깡 세트", price: "37,000원", img: "./img/desert/복수초·요깡 세트.jpg", badge: "NEW" },
	        { title: "빨미에(10EA)", price: "39,000원", img: "./img/desert/빨미에(10EA).jpg", badge: "추천" },
	        { title: "빨미에(대)(10EA)", price: "37,000원", img: "./img/desert/빨미에(대)(10EA).jpg" },
	        { title: "샤블레(4EA)(6EA)", price: "38,000원", img: "./img/desert/샤블레(4EA).jpg", badge: "BEST" },
	        { title: "쇼꼴라 노아젯트", price: "33,000원", img: "./img/desert/쇼꼴라 노아젯트.jpg", badge: "NEW" },
	        { title: "시칠리아(6EA)", price: "29,000원", img: "./img/desert/시칠리아(6EA).jpg", badge: "추천" },
	        { title: "아몬드 쇼꼴라 2종", price: "33,000원", img: "./img/desert/아몬드 쇼꼴라 2종.jpg" },
	        { title: "안나마리아", price: "42,000원", img: "./img/desert/안나마리아.jpg", badge: "BEST" },
	        { title: "에스까르고(10EA)", price: "29,000원", img: "./img/desert/에스까르고(10EA).jpg", badge: "NEW" },
	        { title: "잣쿠키(6EA)", price: "20,000원", img: "./img/desert/잣쿠키(6EA).jpg", badge: "추천" },
	        { title: "초코 구운과자 묶음(4+1)", price: "29,000원", img: "./img/desert/초코 구운과자 묶음(4+1).jpg" },
	        { title: "초코빨미에(10EA)", price: "39,000원", img: "./img/desert/초코빨미에(10EA).jpg", badge: "BEST" },
	        { title: "초코쿠키(6EA)", price: "37,000원", img: "./img/desert/초코쿠키(6EA).jpg", badge: "NEW" },
	        { title: "초코페라", price: "39,000원", img: "./img/desert/초코페라.jpg", badge: "추천" },
	        { title: "코코넛쿠키(6EA)", price: "37,000원", img: "./img/desert/코코넛쿠키(6EA).jpg" },	      	
	    ];


        const itemsPerPage = 12; // 페이지당 최대 12개 표시
        let currentPage = 1;

        function displayItems(page) {
            const filteredItems = items.filter(item => item.badge === "NEW");
            const startIndex = (page - 1) * itemsPerPage;
            const endIndex = startIndex + itemsPerPage;
            const itemsToDisplay = filteredItems.slice(startIndex, endIndex);
            
            const itemWrap = document.getElementById('itemWrap');
            itemWrap.innerHTML = '';

            itemsToDisplay.forEach(item => {
                const itemElem = document.createElement('dl');
                itemElem.classList.add('item_elem');
                itemElem.innerHTML = `
                    <div class="badge">${item.badge}</div>
                    <dt class="thumb">
                        <img class="prd_img" src="${item.img}">
                        <div class="cart-overlay" onclick="addToCart('${item.title}', '${item.price}')">
                            <img src="https://cdn-icons-png.flaticon.com/512/1170/1170678.png" alt="장바구니로 이동">
                        </div>
                    </dt>
                    <dd>
                        <ul>
                            <li class="prd_title">
                                <a href="#">${item.title}</a>
                            </li>
                            <li class="prd_price">
                                ${item.price}
                            </li>
                            <li class="prd_review">
                                <em>상품후기</em>
                                "상품후기갯수"
                            </li>
                        </ul>
                    </dd>
                `;
                itemWrap.appendChild(itemElem);
            });
        }

        function setupPagination(totalItems) {
            const pagination = document.getElementById('pagination');
            const totalPages = Math.ceil(totalItems / itemsPerPage);

            pagination.innerHTML = '';

            for (let i = 1; i <= totalPages; i++) {
                const li = document.createElement('li');
                li.classList.add('page-item');
                if (i === currentPage) li.classList.add('active');
                
                const a = document.createElement('a');
                a.classList.add('page-link');
                a.href = '#';
                a.textContent = i;
                a.addEventListener('click', function(e) {
                    e.preventDefault();
                    currentPage = i;
                    displayItems(currentPage);
                    setupPagination(totalItems);
                });
                
                li.appendChild(a);
                pagination.appendChild(li);
            }
        }

        // 초기화
        document.getElementById('totalItemCount').textContent = items.filter(item => item.badge === "NEW").length;
        displayItems(currentPage);
        setupPagination(items.filter(item => item.badge === "NEW").length);

        function getRandomItems(arr, num) {
            const shuffled = arr.sort(() => 0.5 - Math.random());
            return shuffled.slice(0, num);
        }

        function setUpRecommendationItems() {
            const recommendedItems = getRandomItems(items.filter(item => item.badge === "NEW"), 4);

            recommendedItems.forEach((item, index) => {
                const imgElement = document.querySelectorAll('.card-img-top')[index];
                imgElement.src = item.img;
                document.querySelectorAll('.card-title')[index].textContent = item.title;
                document.querySelectorAll('.card-text')[index].textContent = item.price;

                // 이미지 클릭 시 itemDetail로 이동하게 하는 이벤트 추가
                imgElement.addEventListener('click', function() {
                    localStorage.setItem('selectedItem', JSON.stringify(item));
                    window.location.href = 'itemDetail.html';
                });
            });
        }

        document.addEventListener('DOMContentLoaded', function() {
            const selectedItem = JSON.parse(localStorage.getItem('selectedItem'));

            if (selectedItem) {
                // 제목, 가격, 이미지, 배지를 각각의 위치에 표시
                document.getElementById('prd-tit-h').textContent = selectedItem.title;
                document.querySelector('.price .tb-left b').textContent = selectedItem.price;
                document.querySelector('.thumb-wrap img').src = selectedItem.img;

                // 상세 이미지 경로 처리
                const detailImgSrc = selectedItem.img.replace('.jpg', '_상세.jpg');
                document.querySelector('.tab-pane.show.active img').src = detailImgSrc;

                // 추천 상품 설정
                setUpRecommendationItems();
            }
        });
        
        
        // 로컬 스토리지를 사용하여 장바구니에 상품 추가
        function addToCart(title, price, img) {
            let cartItems = JSON.parse(localStorage.getItem('cartItems')) || [];

            const existingItemIndex = cartItems.findIndex(item => item.title === title);

            if (existingItemIndex >= 0) {
                cartItems[existingItemIndex].quantity += 1;
            } else {
                cartItems.push({
                    title,
                    price,
                    img,
                    quantity: 1
                });
            }

            localStorage.setItem('cartItems', JSON.stringify(cartItems));

            alert('장바구니에 추가되었습니다!');
            
            if (confirm('장바구니로 이동하시겠습니까?')) {
                window.location.href = 'orderCart.html';  // 장바구니 페이지로 이동
            }
        }

        function viewItemDetail(title, price, img, badge) {
            const itemDetail = { title, price, img, badge };
            localStorage.setItem('selectedItem', JSON.stringify(itemDetail));
            window.location.href = 'itemDetail.html';
        }

        // 초기화
        document.getElementById('totalItemCount').textContent = items.length;
        displayItems(currentPage);
        setupPagination(items.length);
       
        
    </script>
</div>
</body>
</html>
